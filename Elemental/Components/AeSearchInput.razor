@*
    Copyright (c) 2020 Apption Corporation

    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.
*@

@inherits HtmlInputElement


<div class="@_classname" @attributes="InputAttributesWithoutClass">
    <i class="@_searchIconClassname"></i>
    <input class="ae input search" type="text" @bind-value="_inputValue" @bind-value:event="oninput" @onkeyup="HandleKeyUp" placeholder="@Placeholder" />
    <i class="@_clearIconClassname" @onclick="ClearSearch"></i>
</div>

@code {

    [Parameter]
    public string SearchIconFAClass { get; set; } = "fas fa-search";
    [Parameter]
    public string ClearIconFAClass { get; set; } = "fas fa-times";

    private string _classname => $"ae search-wrapper {_inputClass}";
    private string _searchIconClassname => $"{SearchIconFAClass} ae search-icon";
    private string _clearIconClassname => $"{ClearIconFAClass} ae clear-icon {(_inputValue?.Length > 0 ? "visible" : "")}";


    private void ClearSearch()
    {
        _inputValue = "";
        OnTimerFire(null, null);
    }
}
